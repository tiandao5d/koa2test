<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
let a = `function OnConfig($stateProvider, $locationProvider, $urlRouterProvider, $httpProvider, NotificationProvider) {
    'ngInject';

    $stateProvider  
        .state('venue', {
            abstract: true,
            views: {
                'main': {
                    templateUrl: 'venue.html',
                    controller: 'VenueController as VenueCtrl'
                },var a = ($stateProvider, $locationProvider, $urlRouterProvider, $httpProvider, NotificationProvider) => {
    'ngInject';
                'nav': {
                    templateUrl: 'mynav.html',
                    controller: 'MyNavbarController as MyNavbarCtrl'
                }var a = function OnConfig($stateProvider, $locationProvider, $urlRouterProvider, $httpProvider, NotificationProvider) {
    'ngInject';
            }`
    let b = null;
    // b = a.replace(/([a-z]+.+\s+([^\s]+[\s]*=[\s]*))*function[^"']+['|"]ngInject['|"]/g, (s, $1, $2) => {
    //     console.log(s, $1, $2)
    // })

    b = a.replace(/([a-z]+\s+(.+)\s*=[\s]*)*([\w\s]*)\((.*)\)[^{]*\{[^"']+['|"]ngInject['|"]/g, (s, $1, $2, $3, $4) => {
        let n = ($2 && $2.trim()) || ($3 && ($3.split('function')[1] || '').trim());
        let arr = $4.replace(/\s+/, '').split(',');
        arr = JSON.stringify(arr);
        return `\n${n}.$inject = ${arr};\n` + s;
    })
    // b = a.match(/([\s]+[^\s]+[\s]*=[\s]*)*function[^"']+['|"]ngInject['|"]/g);
    // b = b.map(s => {
    //     s = s.trim().replace(/\s+/g, ' ');
    //     let n = '';
    //     if ( s.includes('=') ) {
    //         n = s.split('=')[0].trim();
    //     } else {
    //         n = s.split('function')[1].split('(')[0].trim();
    //     }
    //     let y = s.split(')')[0].split('(')[1].replace(/\s+/g, '').split(',');
    //     return {name: n, arr: JSON.stringify(y)};
    // })
console.log(b)
    </script>
</body>

</html>