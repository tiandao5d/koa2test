<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/animate.css">
    <title>Document</title>
    <style>
        .page-body {
            position: fixed;
            left: 0;
            top: 0;
            bottom: 0;
            right: 0;
            background: #aaa;
            overflow: hidden;
        }

        .box {
            position: relative;
            margin: 200px auto;
            width: 500px;
        }

        .box span {
            display: block;
            width: 200px;
            background: #fff;
        }

        .w100 {
            max-width: 100%;
        }

        .w100 .tooltip-inner {
            max-width: none;
        }

/*正方形loading*/

.sk-cube-grid {
  width: 100px;
  height: 100px;
  margin: 100px auto;
}

.sk-cube-grid .sk-cube {
  width: 33%;
  height: 33%;
  background-color: #d3d3d3;
  float: left;
  -webkit-animation: sk-cubeGridScaleDelay 1.3s infinite ease-in-out;
          animation: sk-cubeGridScaleDelay 1.3s infinite ease-in-out; 
}
.sk-cube-grid .sk-cube1 {
  -webkit-animation-delay: 0.2s;
          animation-delay: 0.2s; }
.sk-cube-grid .sk-cube2 {
  -webkit-animation-delay: 0.3s;
          animation-delay: 0.3s; }
.sk-cube-grid .sk-cube3 {
  -webkit-animation-delay: 0.4s;
          animation-delay: 0.4s; }
.sk-cube-grid .sk-cube4 {
  -webkit-animation-delay: 0.1s;
          animation-delay: 0.1s; }
.sk-cube-grid .sk-cube5 {
  -webkit-animation-delay: 0.2s;
          animation-delay: 0.2s; }
.sk-cube-grid .sk-cube6 {
  -webkit-animation-delay: 0.3s;
          animation-delay: 0.3s; }
.sk-cube-grid .sk-cube7 {
  -webkit-animation-delay: 0s;
          animation-delay: 0s; }
.sk-cube-grid .sk-cube8 {
  -webkit-animation-delay: 0.1s;
          animation-delay: 0.1s; }
.sk-cube-grid .sk-cube9 {
  -webkit-animation-delay: 0.2s;
          animation-delay: 0.2s; }

@-webkit-keyframes sk-cubeGridScaleDelay {
  0%, 70%, 100% {
    -webkit-transform: scale3D(1, 1, 1);
            transform: scale3D(1, 1, 1);
  } 35% {
    -webkit-transform: scale3D(0, 0, 1);
            transform: scale3D(0, 0, 1); 
  }
}

@keyframes sk-cubeGridScaleDelay {
  0%, 70%, 100% {
    -webkit-transform: scale3D(1, 1, 1);
            transform: scale3D(1, 1, 1);
  } 35% {
    -webkit-transform: scale3D(0, 0, 1);
            transform: scale3D(0, 0, 1);
  } 
}
.ngui-toast {
    position: fixed;
    z-index: 9999;
    width: 300px;
    color: #fff;
    border-radius: 0;
    background: #337ab7;
    box-shadow: 5px 5px 10px rgba(0, 0, 0, .3);
    padding: 15px;
    top: 15px;
    right: 15px;
}
.ngui-toast.warning {
    color: #fff;
    background: #f0ad4e;
}
.ngui-toast.error {
    color: #fff;
    background: #d9534f;
}
.ngui-toast.success {
    color: #fff;
    background: #5cb85c;
}
.ngui-toast.info {
    color: #fff;
    background: #5bc0de;
}
    </style>
</head>

<body>
    <div class="page-body">
        <div ng-app="app" ng-controller="ctrl">
                <div square-loading></div>
            <div class="box">
                {{checkModel}}
                <div></div>
                <div ng-repeat="(x, y) in checkModel">{{x + ' , ' + y}}</div>
                <div class="btn-group">
                    <label class="btn btn-primary" ng-model="checkModel.left" uib-btn-checkbox>Left</label>
                    <label class="btn btn-primary" ng-model="checkModel.middle" uib-btn-checkbox>Middle</label>
                    <label class="btn btn-primary" ng-model="checkModel.right" uib-btn-checkbox>Right</label>
                </div>    <div class="btn-group">
                        <label class="btn btn-primary" ng-model="boxyyy" uib-btn-radio="'Left'">Left</label>
                        <label class="btn btn-primary" ng-model="boxyyy" uib-btn-radio="'Middle'">Middle</label>
                        <label class="btn btn-primary" ng-model="boxyyy" uib-btn-radio="'Right'">Right</label>
                    </div>
                <div></div>
                <!-- Single button -->
                <div class="btn-group" uib-dropdown>
                    <button id="single-button" type="button" class="btn btn-primary" uib-dropdown-toggle>
                        Button dropdown <span class="caret"></span>
                    </button>
                    <div uib-dropdown-menu class="dropdown-menu" role="menu">
                        sdfsdf
                    </div>
                </div>
                <select ng-model="boxyyy">
                    <option ng-value="x" ng-repeat="x in boxarr">{{x}}</option>
                </select>
                <div class="label label-info tag">
                        a big company
                        <i class="btn-remove">x</i>
                    </div>
                <div class="btn btn-primary" ng-click="ngd()">第三地方</div>
                <div style="height: 15px" uib-tooltip="水电费 阿斯蒂芬"></div>
                <button uib-popover="{{dynamicPopover.content}}" popover-class="sdf-sdfasd-sdf"
                    popover-append-to-body="true" popover-title="{{dynamicPopover.title}}" type="button"
                    class="btn btn-default">Dynamic Popover</button>
            </div>
        </div>
    </div>
    <script src="js/angular-1.5.js"></script>
    <script src="js/ajv.bundle.js"></script>
    <script src="js/ui-bootstrap-tpls-2.2.0.js"></script>
    <script>
        //e5a19d3143116c7ab9
        var app = angular.module('app', ['ui.bootstrap'])
//         app.directive("squareLoading", function() {
//     return {
//         restrict : "A",
//         template : "<h1>自定义指令!</h1>"
//     };
// });
        app.directive('squareLoading', function () {
            return {
                restrict: 'A',
                template: `
                <div class="sk-cube-grid">
                    <div class="sk-cube sk-cube1"></div>
                    <div class="sk-cube sk-cube2"></div>
                    <div class="sk-cube sk-cube3"></div>
                    <div class="sk-cube sk-cube4"></div>
                    <div class="sk-cube sk-cube5"></div>
                    <div class="sk-cube sk-cube6"></div>
                    <div class="sk-cube sk-cube7"></div>
                    <div class="sk-cube sk-cube8"></div>
                    <div class="sk-cube sk-cube9"></div>
                </div>
                `
            }
        })
        app.controller('ctrl', function ($scope, $uibModal) {
            let a = {b: {c: {d: 123}}};
            let b = angular.copy(a);
            b.b.c = 1;
            // 一个提示工具
            class NGUIToast {
                constructor ( defOption ) {
                    // 给定的animate.css的动画对应，一个是出一个是入
                    this.aniArr = [['bounceIn', 'bounceOut'],['bounceInDown', 'bounceOutDown'],['bounceInLeft', 'bounceOutLeft'],['bounceInRight', 'bounceOutRight'],['bounceInUp', 'bounceOutUp'],['fadeIn', 'fadeOut'],['fadeInDown', 'fadeOutDown'],['fadeInDownBig', 'fadeOutDownBig'],['fadeInLeft', 'fadeOutLeft'],['fadeInLeftBig', 'fadeOutLeftBig'],['fadeInRight', 'fadeOutRight'],['fadeInRightBig', 'fadeOutRightBig'],['fadeInUp', 'fadeOutUp'],['fadeInUpBig', 'fadeOutUpBig'],['flipInX', 'flipOutX'],['flipInY', 'flipOutY'],['lightSpeedIn', 'lightSpeedOut'],['rotateIn', 'rotateOut'],['rotateInDownLeft', 'rotateOutDownLeft'],['rotateInDownRight', 'rotateOutDownRight'],['rotateInUpLeft', 'rotateOutUpLeft'],['rotateInUpRight', 'rotateOutUpRight'],['slideInUp', 'slideOutUp'],['slideInDown', 'slideOutDown'],['slideInLeft', 'slideOutLeft'],['slideInRight', 'slideOutRight'],['zoomIn', 'zoomOut'],['zoomInDown', 'zoomOutDown'],['zoomInLeft', 'zoomOutLeft'],['zoomInRight', 'zoomOutRight'],['zoomInUp', 'zoomOutUp'],['rollIn', 'rollOut']];
                    this.typeArr = ['warning', 'error', 'success', 'info', 'normal'];
                    this.defAni = this.randomAni();
                    this.hasAni = ('animation' in document.body.style);
                    this.defOption = {
                        html: '啥也没有',
                        timer: 3000,
                        curAni: this.defAni,
                        toBox: document.body,
                        type: '' // 'warning' 'error' 'success' 'info'，样式
                    }
                    Object.assign(this.defOption, defOption);
                }
                randomArrItem ( arr ) {
                    let max = arr.length - 1;
                    let min = 0;
                    return arr[parseInt(Math.random()*(max - min + 1) + min)];
                }
                randomAni () { // 随机选择一个动画
                    return this.randomArrItem(this.aniArr);
                }
                randomType () {
                    return this.randomArrItem(this.typeArr);
                }
                open ( option = {} ) {
                    if ( typeof option === 'string' ) { // 直接默认显示字符
                        option = {html: option}
                    }
                    option = Object.assign({}, this.defOption, option);
                    let div = document.createElement('div');

                    let toBox = typeof option.toBox === 'string' ? document.querySelector(option.toBox) : option.toBox;
                    let curAni = option.curAni; // 可以自定义动画
                    let timer = option.timer; // 消失的时间
                    let html = option.html; // 显示的内容，可以是html
                    let type = option.type; // 类型显示不同的颜色'warning' 'error' 'success' 'info'，也可以当成类名添加
                    let hasAni = this.hasAni;
                    if ( type ) {
                        div.classList.add(type);
                    }
                    div.innerHTML = html;
                    if ( this.hasAni ) { // 支持动画
                        div.classList.add(curAni[0], 'animated', 'ngui-show', 'ngui-toast');
                        div.addEventListener('click', () => {
                            clearTimeout(option.outIndex);
                            div.classList.remove(curAni[0], curAni[1], 'animated', 'ngui-show');
                            div.classList.add(curAni[1], 'animated');
                        });
                        div.addEventListener('animationend', animationend);
                    } else { // 不支持动画
                        div.classList.add('ngui-toast');
                        div.addEventListener('click', () => {
                            clearTimeout(option.outIndex);
                            toBox.removeChild(div);
                        });
                        timerBind()
                    }
                    div.addEventListener('mouseenter', () => { // 悬浮清除计时
                        clearTimeout(option.outIndex);
                    });
                    div.addEventListener('mouseleave', () => { // 离开绑定计时
                        timerBind();
                    });
                    toBox.appendChild(div);
                    div.nguiToastOption = option;
                    function animationend () {
                        if ( div.classList.contains('ngui-show') ) {
                            timerBind();
                        } else {
                            toBox.removeChild(div);
                        }
                    }
                    function timerBind () { // 延迟绑定
                        option.outIndex = setTimeout(() => {
                            if ( hasAni ) {
                                option.outIndex = setTimeout(() => {
                                    div.classList.remove(curAni[0], curAni[1], 'animated', 'ngui-show');
                                    div.classList.add(curAni[1], 'animated');
                                }, timer);
                            } else {
                                toBox.removeChild(div);
                            }
                        }, timer);
                    }
                }
            }
            let nguiToast = $scope.nguiToast = new NGUIToast();
            $scope.ngd = function () {
                nguiToast.index = nguiToast.index ? nguiToast.index + 1 : 1;
                nguiToast.open({
                    type: nguiToast.randomType(),
                    curAni: nguiToast.randomAni(),
                    html: '搞点好玩的'
                })
                // $uibModal.open({
                //     template: '<div>{{aa}}{{modal.box}}<div ng-click="$dismiss()">在</div></div>',
                //     controller ( $uibModalInstance, $scope ) {
                //         $scope.aa = '123'
                //         this.box = 456;
                //         console.log($scope)
                        
                //     },
                //     controllerAs: 'modal',
                //     resolve: {
                //         a () {
                //             return 'b'
                //         }
                //     }
                // })
            };
            $scope.checkModel = {};
            $scope.dynamicPopover = {
                content: '11111',
                title: '2222'
            }
            $scope.boxyyy = 'Left';
            $scope.boxarr = ['Left', 'Right', 'Bottom', 'Top']
        })
        var data = {
            a: 123,
            b: 1
        }
        var vobj = {
            $schema: 'http://json-schema.org/draft-04/schema#',
            properties: {
                a: {
                    type: 'number'
                },
                b: {
                    errorMessage: {
                        type: 'aaa 大是大非'
                    },
                    type: 'string'
                }
            },
            required: ['a']
        }
        var ajv = new Ajv();
        var valid = ajv.validate(vobj, data);
        console.log(valid, ajv.errorsText(), ajv.errors[0])

    </script>
</body>

</html>